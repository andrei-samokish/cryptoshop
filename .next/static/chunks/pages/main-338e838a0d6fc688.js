(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[671],{5206:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/main",function(){return n(9580)}])},6239:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(5893),s=n(967),i=n(849),a=n(5553),c=n(7294),o=n(2256),l=n(7257),u=n(7002),d=n(7632);function h(e){let{item:t}=e,[n,s]=(0,c.useState)(0);async function i(e,t){try{(await (0,u.Z)()).buy(e.id,t,{gasLimit:3e6,value:e.price*t}),console.log(e.price*t)}catch(n){console.error(n)}}return(0,r.jsx)("div",{className:"w-1/3",children:(0,r.jsxs)(o.Z,{raised:!0,centered:!0,children:[(0,r.jsx)(l.Z,{src:"data:image/svg+xml;base64,".concat(t.img),wrapped:!0,ui:!1}),(0,r.jsxs)(o.Z.Content,{children:[(0,r.jsx)(o.Z.Header,{children:t.name}),(0,r.jsx)(o.Z.Meta,{children:t.desc}),(0,r.jsx)(o.Z.Description,{children:(0,r.jsxs)("div",{className:"flex flex-row items-center",children:[a.dF(t.price)+"Ξ",(0,r.jsx)("button",{className:" text-stone-600 ml-[15px] mr-[5px] bg-stone-300 p-[5px] h-[25px] w-[25px] rounded hover:bg-[#666666] hover:text-cyan-50 text-center",onClick:function(){n>0&&s(e=>e-1)},children:"-"}),n,(0,r.jsx)("button",{className:" text-stone-600 ml-[5px] bg-stone-300 p-[5px] h-[25px] w-[25px] rounded hover:bg-[#666666] hover:text-cyan-50 text-center",onClick:function(){s(e=>e+1)},children:"+"}),(0,r.jsx)("button",{className:" text-stone-600 bg-stone-300 mx-[10px] px-[0.7em] h-[30px] w-[70px] rounded hover:bg-[#666666] hover:text-cyan-50 ",onClick:async()=>await i(t,n),children:"Buy"})]})})]})]},(0,d.Z)())})}var x=n(8005),m=n(1873),f=n(416);function p(e){let{item:t,amount:n}=e,[i,h]=(0,c.useState)(0),[p,g]=(0,c.useState)(!1);async function j(e){try{await (await (0,u.Z)()).fillStock(e,i)}catch(t){console.error(t)}}async function Z(e){try{await (await (0,u.Z)()).withdrawFromSale(e)}catch(t){console.error(t)}}return(0,c.useEffect)(()=>{(async()=>{let e=await (await (0,u.Z)()).signer.getAddress();t.seller===e&&g(!0)})()},[]),(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(l.Z,{src:"data:image/svg+xml;base64,".concat(t.img),wrapped:!0,ui:!1}),(0,r.jsxs)(o.Z.Content,{children:[(0,r.jsx)(o.Z.Header,{children:t.name}),(0,r.jsx)(o.Z.Meta,{children:a.dF(t.price)+"Ξ"}),(0,r.jsxs)(o.Z.Description,{children:["You have ",n," of those!"]})]}),p&&(0,r.jsx)(o.Z.Content,{extra:!0,children:(0,r.jsxs)(x.Z,{columns:2,children:[(0,r.jsx)(x.Z.Column,{stretched:!0,children:(0,r.jsx)(m.Z,{trigger:(0,r.jsx)(s.Z,{content:"Withdraw from sale",basic:!0}),content:(0,r.jsx)(s.Z,{color:"red",content:"Sure?",onClick:()=>Z(t.id)}),on:"click",position:"top right"})}),(0,r.jsx)(x.Z.Column,{stretched:!0,children:(0,r.jsx)(m.Z,{trigger:(0,r.jsx)(s.Z,{content:"Fill stock",basic:!0}),content:(0,r.jsxs)(f.Z,{placeholder:"amount",type:"text",action:!0,onChange:e=>h(parseInt(e.target.value)),children:[(0,r.jsx)("input",{}),(0,r.jsx)(s.Z,{onClick:()=>j(t.id),children:"Fill"})]}),on:"click",position:"top right"})})]})})]},(0,d.Z)())}function g(e){let{items:t,amounts:n,onMoreClick:a,isLoading:c}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-row w-full h-auto flex-wrap justify-start",children:[t.map((e,t)=>n?(0,r.jsx)(p,{item:e,amount:n[t]}):(0,r.jsx)(h,{item:e},t)),t.length?(0,r.jsx)("div",{className:"w-1/3 flex justify-center items-center",children:(0,r.jsx)(s.Z,{size:"big",onClick:async()=>await a(),loading:c,children:"Load More"})}):(0,r.jsx)(i.Z,{size:"big",active:!0,children:"Loading"})]})})}},9430:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(5893),s=n(7294),i=n(5712),a=n(1664),c=n.n(a),o=n(1163),l=n(4702);function u(){let[e,t]=(0,s.useState)(""),n=(0,o.useRouter)();return(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(c(),{href:"/main",children:(0,r.jsx)(l.Z.Item,{children:(0,r.jsx)("div",{className:"font-black text-lg hover:underline",children:"ζ"})})}),(0,r.jsx)(c(),{href:"/account",children:(0,r.jsx)(l.Z.Item,{children:(0,r.jsx)("div",{className:"font-black text-lg hover:underline",children:"Personal account"})})}),(0,r.jsx)(l.Z.Item,{position:"right",children:(0,r.jsx)("div",{className:"ui input",children:(0,r.jsx)("input",{type:"text",placeholder:"Search...",value:e,onChange:e=>t(e.target.value),onKeyDown(t){localStorage.setItem("req",e),"Enter"==t.key&&n.push("/search")}})})})]})}function d(e){let{children:t}=e;return(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(u,{}),t]})}},9362:function(e,t,n){"use strict";var r,s;n.d(t,{L:function(){return r}}),(s=r||(r={})).general="general",s.personal="personal",s.searched="searched"},6250:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7002),s=n(2556);async function i(e,t,n){let i=[],a=[],c=await (0,r.Z)();switch(t){case"general":for(let o=e;o<e+8;o++)try{let l=await s.Z.items(o);if(!(await s.Z.balanceOf(l[2],o)).toNumber())continue;let u=await s.Z.names(o),d={id:o,name:u,desc:l[0],img:l[1],seller:l[2],price:l[3].toNumber()};i.push(d)}catch(h){break}break;case"personal":for(let x=e;x<e+8;x++)try{let m=await c.ownedItems(await c.signer.getAddress(),x,0),f=await c.ownedItems(await c.signer.getAddress(),x,1),p=await s.Z.items(m),g=await s.Z.names(m);a.push(f.toNumber());let j={id:m.toNumber(),name:g,desc:p[0],img:p[1],seller:p[2],price:p[3].toNumber()};i.push(j)}catch(Z){console.error(Z);break}break;case"searched":for(let w=e;w<e+8;w++)try{let b=await s.Z.names(w);if(!b.toLowerCase().includes(n))continue;let v=await s.Z.items(w);if(!(await s.Z.balanceOf(v[2],w)).toNumber())continue;let y={id:w,name:b,desc:v[0],img:v[1],seller:v[2],price:v[3].toNumber()};i.push(y)}catch(k){break}}return[i,a]}},9580:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n(5893),s=n(9430);n(9793);var i=n(6239),a=n(7294),c=n(6250),o=n(9362);function l(){let[e,t]=(0,a.useState)([]),[n,l]=(0,a.useState)(0),[u,d]=(0,a.useState)(!0);async function h(){d(!0);let r=(await (0,c.Z)(n,o.L.general))[0];t([...e,...r]),l(e=>e+8),d(!1)}return(0,a.useEffect)(()=>{(async()=>{t((await (0,c.Z)(n,o.L.general))[0]),l(e=>e+8),d(!1)})()},[]),(0,r.jsx)("div",{className:"bg-gradient-to-b from-indigo-500 to-gray-300 h-screen",children:(0,r.jsx)(s.Z,{children:(0,r.jsx)(i.Z,{items:e,onMoreClick:h,isLoading:u})})})}}},function(e){e.O(0,[639,430,796,774,888,179],function(){return e(e.s=5206)}),_N_E=e.O()}]);