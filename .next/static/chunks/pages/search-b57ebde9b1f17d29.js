(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8266:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return n(3109)}])},6239:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var s=n(5893),r=n(967),i=n(849),a=n(5553),c=n(7294),o=n(2256),l=n(7257),u=n(7002),d=n(7632);function h(e){let{item:t}=e,[n,r]=(0,c.useState)(0);async function i(e,t){try{(await (0,u.Z)()).buy(e.id,t,{gasLimit:3e6,value:e.price*t}),console.log(e.price*t)}catch(n){console.error(n)}}return(0,s.jsx)("div",{className:"w-1/3",children:(0,s.jsxs)(o.Z,{raised:!0,centered:!0,children:[(0,s.jsx)(l.Z,{src:"data:image/svg+xml;base64,".concat(t.img),wrapped:!0,ui:!1}),(0,s.jsxs)(o.Z.Content,{children:[(0,s.jsx)(o.Z.Header,{children:t.name}),(0,s.jsx)(o.Z.Meta,{children:t.desc}),(0,s.jsx)(o.Z.Description,{children:(0,s.jsxs)("div",{className:"flex flex-row items-center",children:[a.dF(t.price)+"Ξ",(0,s.jsx)("button",{className:" text-stone-600 ml-[15px] mr-[5px] bg-stone-300 p-[5px] h-[25px] w-[25px] rounded hover:bg-[#666666] hover:text-cyan-50 text-center",onClick:function(){n>0&&r(e=>e-1)},children:"-"}),n,(0,s.jsx)("button",{className:" text-stone-600 ml-[5px] bg-stone-300 p-[5px] h-[25px] w-[25px] rounded hover:bg-[#666666] hover:text-cyan-50 text-center",onClick:function(){r(e=>e+1)},children:"+"}),(0,s.jsx)("button",{className:" text-stone-600 bg-stone-300 mx-[10px] px-[0.7em] h-[30px] w-[70px] rounded hover:bg-[#666666] hover:text-cyan-50 ",onClick:async()=>await i(t,n),children:"Buy"})]})})]})]},(0,d.Z)())})}var x=n(8005),m=n(1873),f=n(416);function g(e){let{item:t,amount:n}=e,[i,h]=(0,c.useState)(0),[g,j]=(0,c.useState)(!1);async function p(e){try{await (await (0,u.Z)()).fillStock(e,i)}catch(t){console.error(t)}}async function w(e){try{await (await (0,u.Z)()).withdrawFromSale(e)}catch(t){console.error(t)}}return(0,c.useEffect)(()=>{(async()=>{let e=await (await (0,u.Z)()).signer.getAddress();t.seller===e&&j(!0)})()},[]),(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(l.Z,{src:"data:image/svg+xml;base64,".concat(t.img),wrapped:!0,ui:!1}),(0,s.jsxs)(o.Z.Content,{children:[(0,s.jsx)(o.Z.Header,{children:t.name}),(0,s.jsx)(o.Z.Meta,{children:a.dF(t.price)+"Ξ"}),(0,s.jsxs)(o.Z.Description,{children:["You have ",n," of those!"]})]}),g&&(0,s.jsx)(o.Z.Content,{extra:!0,children:(0,s.jsxs)(x.Z,{columns:2,children:[(0,s.jsx)(x.Z.Column,{stretched:!0,children:(0,s.jsx)(m.Z,{trigger:(0,s.jsx)(r.Z,{content:"Withdraw from sale",basic:!0}),content:(0,s.jsx)(r.Z,{color:"red",content:"Sure?",onClick:()=>w(t.id)}),on:"click",position:"top right"})}),(0,s.jsx)(x.Z.Column,{stretched:!0,children:(0,s.jsx)(m.Z,{trigger:(0,s.jsx)(r.Z,{content:"Fill stock",basic:!0}),content:(0,s.jsxs)(f.Z,{placeholder:"amount",type:"text",action:!0,onChange:e=>h(parseInt(e.target.value)),children:[(0,s.jsx)("input",{}),(0,s.jsx)(r.Z,{onClick:()=>p(t.id),children:"Fill"})]}),on:"click",position:"top right"})})]})})]},(0,d.Z)())}function j(e){let{items:t,amounts:n,onMoreClick:a,isLoading:c}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex flex-row w-full h-auto flex-wrap justify-start",children:[t.map((e,t)=>n?(0,s.jsx)(g,{item:e,amount:n[t]}):(0,s.jsx)(h,{item:e},t)),t.length?(0,s.jsx)("div",{className:"w-1/3 flex justify-center items-center",children:(0,s.jsx)(r.Z,{size:"big",onClick:async()=>await a(),loading:c,children:"Load More"})}):(0,s.jsx)(i.Z,{size:"big",active:!0,children:"Loading"})]})})}},9430:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var s=n(5893),r=n(7294),i=n(5712),a=n(1664),c=n.n(a),o=n(1163),l=n(4702);function u(){let[e,t]=(0,r.useState)(""),n=(0,o.useRouter)();return(0,s.jsxs)(l.Z,{children:[(0,s.jsx)(c(),{href:"/main",children:(0,s.jsx)(l.Z.Item,{children:(0,s.jsx)("div",{className:"font-black text-lg hover:underline",children:"ζ"})})}),(0,s.jsx)(c(),{href:"/account",children:(0,s.jsx)(l.Z.Item,{children:(0,s.jsx)("div",{className:"font-black text-lg hover:underline",children:"Personal account"})})}),(0,s.jsx)(l.Z.Item,{position:"right",children:(0,s.jsx)("div",{className:"ui input",children:(0,s.jsx)("input",{type:"text",placeholder:"Search...",value:e,onChange:e=>t(e.target.value),onKeyDown(t){localStorage.setItem("req",e),"Enter"==t.key&&n.push("/search")}})})})]})}function d(e){let{children:t}=e;return(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(u,{}),t]})}},9362:function(e,t,n){"use strict";var s,r;n.d(t,{L:function(){return s}}),(r=s||(s={})).general="general",r.personal="personal",r.searched="searched"},6250:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(7002),r=n(2556);async function i(e,t,n){let i=[],a=[],c=await (0,s.Z)();switch(t){case"general":for(let o=e;o<e+8;o++)try{let l=await r.Z.items(o);if(!(await r.Z.balanceOf(l[2],o)).toNumber())continue;let u=await r.Z.names(o),d={id:o,name:u,desc:l[0],img:l[1],seller:l[2],price:l[3].toNumber()};i.push(d)}catch(h){break}break;case"personal":for(let x=e;x<e+8;x++)try{let m=await c.ownedItems(await c.signer.getAddress(),x,0),f=await c.ownedItems(await c.signer.getAddress(),x,1),g=await r.Z.items(m),j=await r.Z.names(m);a.push(f.toNumber());let p={id:m.toNumber(),name:j,desc:g[0],img:g[1],seller:g[2],price:g[3].toNumber()};i.push(p)}catch(w){console.error(w);break}break;case"searched":for(let Z=e;Z<e+8;Z++)try{let b=await r.Z.names(Z);if(!b.toLowerCase().includes(n))continue;let v=await r.Z.items(Z);if(!(await r.Z.balanceOf(v[2],Z)).toNumber())continue;let y={id:Z,name:b,desc:v[0],img:v[1],seller:v[2],price:v[3].toNumber()};i.push(y)}catch(N){break}}return[i,a]}},3109:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n(5893),r=n(7294),i=n(6239),a=n(9430),c=n(9362),o=n(6250);function l(){let[e,t]=(0,r.useState)(0),[n,l]=(0,r.useState)([]),[u,d]=(0,r.useState)(""),[h,x]=(0,r.useState)(!0);async function m(){x(!0);let s=(await (0,o.Z)(e,c.L.searched,null==u?void 0:u.toLowerCase()))[0];l([...n,...s]),t(e=>e+8),x(!1)}return(0,r.useEffect)(()=>{(async()=>{let t=localStorage.getItem("req");d(t),l((await (0,o.Z)(e,c.L.searched,null==t?void 0:t.toLowerCase()))[0])})(),x(!1),t(e=>e+8)},[]),console.log(n),(0,s.jsx)("div",{className:"bg-gradient-to-b from-indigo-500 to-gray-300 h-screen",children:(0,s.jsxs)(a.Z,{children:[(0,s.jsxs)("h1",{className:"text-white",children:["All ",(0,s.jsxs)("strong",{children:['"',u,'"']})," items:"]}),(0,s.jsx)(i.Z,{items:n,onMoreClick:m,isLoading:h})]})})}}},function(e){e.O(0,[639,430,796,774,888,179],function(){return e(e.s=8266)}),_N_E=e.O()}]);